<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Getting started | WithingsFlutter</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="A Flutter package to make your life easier when dealing with Withings APIs">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/WithingsFlutter/assets/css/0.styles.6e301c40.css" as="style"><link rel="preload" href="/WithingsFlutter/assets/js/app.8c854ef9.js" as="script"><link rel="preload" href="/WithingsFlutter/assets/js/2.eeb24f79.js" as="script"><link rel="preload" href="/WithingsFlutter/assets/js/7.054bb442.js" as="script"><link rel="prefetch" href="/WithingsFlutter/assets/js/10.4aefd1bc.js"><link rel="prefetch" href="/WithingsFlutter/assets/js/11.ac4f1ce6.js"><link rel="prefetch" href="/WithingsFlutter/assets/js/12.f210f335.js"><link rel="prefetch" href="/WithingsFlutter/assets/js/13.8e866b4e.js"><link rel="prefetch" href="/WithingsFlutter/assets/js/14.788ab653.js"><link rel="prefetch" href="/WithingsFlutter/assets/js/15.343945fb.js"><link rel="prefetch" href="/WithingsFlutter/assets/js/16.e4bf995b.js"><link rel="prefetch" href="/WithingsFlutter/assets/js/17.1cf8794c.js"><link rel="prefetch" href="/WithingsFlutter/assets/js/18.2829df33.js"><link rel="prefetch" href="/WithingsFlutter/assets/js/3.a1e4df39.js"><link rel="prefetch" href="/WithingsFlutter/assets/js/4.f876ad59.js"><link rel="prefetch" href="/WithingsFlutter/assets/js/5.18c5236f.js"><link rel="prefetch" href="/WithingsFlutter/assets/js/6.e86df8f9.js"><link rel="prefetch" href="/WithingsFlutter/assets/js/8.298dab25.js"><link rel="prefetch" href="/WithingsFlutter/assets/js/9.03feb145.js">
    <link rel="stylesheet" href="/WithingsFlutter/assets/css/0.styles.6e301c40.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/WithingsFlutter/" class="home-link router-link-active"><!----> <span class="site-name">WithingsFlutter</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/WithingsFlutter/getstarted/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Get Started
</a></div><div class="nav-item"><a href="/WithingsFlutter/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://pub.dev/packages/withings_flutter" target="_blank" rel="noopener noreferrer" class="nav-link external">
  pub.dev
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/fraca98/WithingsFlutter" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/WithingsFlutter/getstarted/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Get Started
</a></div><div class="nav-item"><a href="/WithingsFlutter/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://pub.dev/packages/withings_flutter" target="_blank" rel="noopener noreferrer" class="nav-link external">
  pub.dev
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/fraca98/WithingsFlutter" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Getting started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/WithingsFlutter/getstarted/#step-1-install-withingsflutter" class="sidebar-link">Step 1: Install WithingsFlutter</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/WithingsFlutter/getstarted/#for-android-only-modify-you-manifest" class="sidebar-link">(for Android only) Modify you manifest</a></li><li class="sidebar-sub-header"><a href="/WithingsFlutter/getstarted/#for-android-only-requirement-web-browser" class="sidebar-link">(for Android only) Requirement: Web Browser</a></li><li class="sidebar-sub-header"><a href="/WithingsFlutter/getstarted/#for-web-only-requirement-create-an-endpoint" class="sidebar-link">(for Web only) Requirement: Create an endpoint</a></li></ul></li><li><a href="/WithingsFlutter/getstarted/#step-2-test-withingsflutter" class="sidebar-link">Step 2: Test WithingsFlutter</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/WithingsFlutter/getstarted/#preliminary-requirement-register-your-app" class="sidebar-link">Preliminary requirement: Register your app</a></li><li class="sidebar-sub-header"><a href="/WithingsFlutter/getstarted/#app-authentication" class="sidebar-link">App authentication</a></li><li class="sidebar-sub-header"><a href="/WithingsFlutter/getstarted/#fetch-a-list-of-ecg-records-and-afib-classification-for-a-given-period-of-time" class="sidebar-link">Fetch a list of ECG records and Afib classification for a given period of time</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting started</h1> <h2 id="step-1-install-withingsflutter"><a href="#step-1-install-withingsflutter" class="header-anchor">#</a> Step 1: Install WithingsFlutter</h2> <p>To install WithingsFlutter, simply add <code>withings_flutter:</code> to the dependencies of your <code>pubspec.yaml</code> file:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">dependencies</span><span class="token punctuation">:</span>
    <span class="token key atrule">withings_flutter</span><span class="token punctuation">:</span> <span class="token comment">#latest version</span>
</code></pre></div><h3 id="for-android-only-modify-you-manifest"><a href="#for-android-only-modify-you-manifest" class="header-anchor">#</a> (for Android only) Modify you manifest</h3> <p>WithingsFlutter uses <code>flutter_web_auth</code> to let you authenticate to Withings. In Android, you need to add these lines of code to your <code>android/app/src/main/AndroidManifest.xml</code> file:</p> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activity</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.linusu.flutter_web_auth.CallbackActivity<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>exported</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span> <span class="token attr-name"><span class="token namespace">android:</span>label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flutter_web_auth<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.intent.action.VIEW<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.intent.category.DEFAULT<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.intent.category.BROWSABLE<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>data</span> <span class="token attr-name"><span class="token namespace">android:</span>scheme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CALLBACK_SCHEME<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activity</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>and change <code>CALLBACK_SCHEME</code> with your callback scheme (in the test example below this will be <code>example</code>)</p> <h3 id="for-android-only-requirement-web-browser"><a href="#for-android-only-requirement-web-browser" class="header-anchor">#</a> (for Android only) Requirement: Web Browser</h3> <p>WithingsFlutter uses <code>flutter_web_auth</code> to let you authenticate to Withings. In order to let it work correcty please be sure that your emulator or your physical device is using Chrome, Opera, or Firefox as default web browser.</p> <h3 id="for-web-only-requirement-create-an-endpoint"><a href="#for-web-only-requirement-create-an-endpoint" class="header-anchor">#</a> (for Web only) Requirement: Create an endpoint</h3> <p>WithingsFlutter uses <code>flutter_web_auth</code> to let you authenticate to Withings. In order to let it work correcty, as indicated in <a href="https://pub.dev/packages/flutter_web_auth" target="_blank" rel="noopener noreferrer">https://pub.dev/packages/flutter_web_auth<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, on the Web platform an endpoint needs to be created that captures the callback URL and sends it to the application using the JavaScript <code>postMessage()</code> method. In the <code>./web</code> folder of the project, create an HTML file with the name e.g. <code>auth.html</code> with content:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Authentication complete<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Authentication is complete. If this does not happen automatically, please
close the window.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  window<span class="token punctuation">.</span>opener<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string-property property">'flutter-web-auth'</span><span class="token operator">:</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href
  <span class="token punctuation">}</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">;</span>
  window<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Redirection URL passed to the authentication service must be the same as the URL on which the application is running (schema, host, port if necessary) and the path must point to created HTML file, <code>/auth.html</code>in this case. The <code>callbackUrlScheme</code> parameter of the <code>authenticate()</code> method does not take into account, so it is possible to use a schema for native platforms in the code.</p> <p>For the Sign in with Apple in web_message response mode, postMessage from <a href="https://appleid.apple.com" target="_blank" rel="noopener noreferrer">https://appleid.apple.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is also captured, and the authorization object is returned as a URL fragment encoded as a query string (for compatibility with other providers).</p> <h2 id="step-2-test-withingsflutter"><a href="#step-2-test-withingsflutter" class="header-anchor">#</a> Step 2: Test WithingsFlutter</h2> <p>Once installed, it is time to test drive WithingsFlutter. In this example, we will use WithingsFlutter to authenticate our app into Withings APIs and simply fetch a list of ECG records and Afib classification for a given period of time.</p> <h3 id="preliminary-requirement-register-your-app"><a href="#preliminary-requirement-register-your-app" class="header-anchor">#</a> Preliminary requirement: Register your app</h3> <p>To be able to perform any operation with the Withings APIs, you must register first your application in the developer portal of Withings and obtain two IDs, namely the &quot;<strong>Client ID</strong>&quot; and the &quot;<strong>(Client) Secret</strong>&quot;. To do so, you have to follow these steps.</p> <ul><li><p>Choose the environment on which your applications will be running at <a href="https://developer.withings.com/dashboard/welcome" target="_blank" rel="noopener noreferrer">https://developer.withings.com/dashboard/welcome<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.
<img src="/WithingsFlutter/environment.png" alt="Withings environment selection"></p></li> <li><p>Then proceed to create a Withings account, if you do not have one, or login.</p></li> <li><p>Register a new app at <a href="https://developer.withings.com/dashboard/create" target="_blank" rel="noopener noreferrer">https://developer.withings.com/dashboard/create<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, pressing on the button &quot;<strong>+ Create an application</strong>&quot;.</p></li></ul> <p><img src="/WithingsFlutter/create.png" alt="Withings create an application"></p> <ul><li>Select the plane of integration and then accept the terms and conditions.</li></ul> <p><img src="/WithingsFlutter/applicationcreation.png" alt="Withings applicationcreation"></p> <ul><li>Then the following form will appear</li></ul> <p><img src="/WithingsFlutter/information.png" alt="Withings information"></p> <ul><li>Set the <strong>Application name</strong></li> <li>Set a brief <strong>Application Description</strong> (e.g., &quot;Just a simple test of an awesome package.&quot;)</li> <li>Set the <strong>Registered URLs</strong> to set the <strong>Callback URLs</strong> (e.g., &quot;example://withings/auth&quot;).</li> <li>Upload, if you want, your <strong>Project Logo</strong>.</li> <li>Press on <strong>Done</strong> button</li> <li>In the following page, copy and save the values of the &quot;<strong>Client ID</strong>&quot; and the &quot;<strong>(Client) Secret</strong>&quot; provided by Withings for your app.</li> <li>Press on the <strong>Confirm</strong> button and you will see a summary of the info related to your registered app, as:
<ul><li><strong>ClientID</strong></li> <li><strong>(Client) Secret</strong></li> <li><strong>Callback URL</strong></li> <li><strong>API Endpoint</strong></li></ul></li></ul> <h3 id="app-authentication"><a href="#app-authentication" class="header-anchor">#</a> App authentication</h3> <p>You are now ready to authorize your application.</p> <p>To do that, simply call the asynchronous method <code>WithingsConnector.authorize()</code>, within your code, as:</p> <div class="language-dart extra-class"><pre class="language-dart"><code><span class="token class-name">WithingsCredentials</span><span class="token operator">?</span> withingsCredentials <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token class-name">WithingsConnector</span><span class="token punctuation">.</span><span class="token function">authorize</span><span class="token punctuation">(</span>
                clientID<span class="token punctuation">:</span> <span class="token class-name">Strings</span><span class="token punctuation">.</span>withingsClientID<span class="token punctuation">,</span>
                clientSecret<span class="token punctuation">:</span> <span class="token class-name">Strings</span><span class="token punctuation">.</span>withingsClientSecret<span class="token punctuation">,</span>
                scope<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">'user.activity,user.metrics,user.sleepevents'</span></span><span class="token punctuation">,</span>
                redirectUri<span class="token punctuation">:</span> <span class="token class-name">Strings</span><span class="token punctuation">.</span>withingsRedirectUri<span class="token punctuation">,</span>
                callbackUrlScheme<span class="token punctuation">:</span> <span class="token class-name">Strings</span><span class="token punctuation">.</span>withingsCallbackScheme<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>and set in:</p> <ul><li>clientID: the clientID obtained before</li> <li>clientSecret: the (Client) Secret obtained before</li> <li>scopes: a comma-separated list (of <code>Strings</code>) of permission scopes you want to ask your user</li> <li>redirectUri: the Callback URL obtained before, in our example <code>'example://withings/auth'</code></li> <li>callbackUrlScheme: the callbackUrlScheme, in our example <code>'example'</code></li></ul> <p>This will open a web view where user will be able to input his Withings credentials and login.
After the login, the web view will close and the method will return a <code>WithingsCredentials?</code> instance that contains the credentials to be used to make requests to the Withings Web API via <code>withings_flutter</code>. In particular, <code>withingsCredentials.userID</code> contains the Withings user id of the user that just authorized <code>withings_flutter</code>, <code>withingsCredentials.withingsAccessToken</code> contains the Withings access token, <code>withingsCredentials.withingsRefreshToken</code> contains the Withings refresh token and <code>withingsCredentials.expires</code> defines the access token expiry delay in seconds.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The credentials are not stored automatically somewhere in a persistent way. You must manage such crendentials according to your strategy.</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>You find more informations about the <code>scope</code> field in <a href="/WithingsFlutter/guide/authorization/authorization">Authorization</a></p></div> <h3 id="fetch-a-list-of-ecg-records-and-afib-classification-for-a-given-period-of-time"><a href="#fetch-a-list-of-ecg-records-and-afib-classification-for-a-given-period-of-time" class="header-anchor">#</a> Fetch a list of ECG records and Afib classification for a given period of time</h3> <p>With your app authorized, you are now ready to fetch data from Withings. In this example, we will <a href="/WithingsFlutter/guide/heart/heartv2list">fetch a list of ECG records and Afib classification for a given period of time</a>.</p> <p>Using WithingsFlutter, this is very easy. First instanciate a <code>WithingsHeartListDataManager</code> :</p> <div class="language-dart extra-class"><pre class="language-dart"><code><span class="token class-name">WithingsHeartListDataManager</span> withingsHeartListDataManager <span class="token operator">=</span>
    <span class="token class-name">WithingsHeartListDataManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Then fetch the desired data using the <code>fetch</code> method of <code>WithingsHeartListDataManager</code> with the proper <code>WithingsHeartAPIURL</code>:</p> <div class="language-dart extra-class"><pre class="language-dart"><code><span class="token class-name">WithingsHeartListData</span> listheartdata <span class="token operator">=</span> <span class="token keyword">await</span> withingsHeartListDataManager
        <span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token class-name">WithingsHeartAPIURL</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>accessToken<span class="token punctuation">:</span> withingsCredentials<span class="token punctuation">.</span>accessToken<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>That's it!</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>For more information on WithingsFlutter functionalities, check out the <a href="/WithingsFlutter/guide/">Guide</a></p></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/WithingsFlutter/assets/js/app.8c854ef9.js" defer></script><script src="/WithingsFlutter/assets/js/2.eeb24f79.js" defer></script><script src="/WithingsFlutter/assets/js/7.054bb442.js" defer></script>
  </body>
</html>
