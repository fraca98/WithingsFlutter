(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{281:function(t,a,e){"use strict";e.r(a);var s=e(14),n=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"getting-started"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getting-started"}},[t._v("#")]),t._v(" Getting started")]),t._v(" "),a("h2",{attrs:{id:"step-1-install-withingsflutter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-1-install-withingsflutter"}},[t._v("#")]),t._v(" Step 1: Install WithingsFlutter")]),t._v(" "),a("p",[t._v("To install WithingsFlutter, simply add "),a("code",[t._v("withings_flutter:")]),t._v(" to the dependencies of your "),a("code",[t._v("pubspec.yaml")]),t._v(" file:")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dependencies")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("withings_flutter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#latest version")]),t._v("\n")])])]),a("h3",{attrs:{id:"for-android-only-modify-you-manifest"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#for-android-only-modify-you-manifest"}},[t._v("#")]),t._v(" (for Android only) Modify you manifest")]),t._v(" "),a("p",[t._v("WithingsFlutter uses "),a("code",[t._v("flutter_web_auth")]),t._v(" to let you authenticate to Withings. In Android, you need to add these lines of code to your "),a("code",[t._v("android/app/src/main/AndroidManifest.xml")]),t._v(" file:")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("activity")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("com.linusu.flutter_web_auth.CallbackActivity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("exported")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("intent-filter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("label")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("flutter_web_auth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("action")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("android.intent.action.VIEW"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("category")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("android.intent.category.DEFAULT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("category")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("name")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("android.intent.category.BROWSABLE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("data")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("android:")]),t._v("scheme")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("CALLBACK_SCHEME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("intent-filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("activity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("and change "),a("code",[t._v("CALLBACK_SCHEME")]),t._v(" with your callback scheme (in the test example below this will be "),a("code",[t._v("example")]),t._v(")")]),t._v(" "),a("h3",{attrs:{id:"for-android-only-requirement-web-browser"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#for-android-only-requirement-web-browser"}},[t._v("#")]),t._v(" (for Android only) Requirement: Web Browser")]),t._v(" "),a("p",[t._v("WithingsFlutter uses "),a("code",[t._v("flutter_web_auth")]),t._v(" to let you authenticate to Withings. In order to let it work correcty please be sure that your emulator or your physical device is using Chrome, Opera, or Firefox as default web browser.")]),t._v(" "),a("h3",{attrs:{id:"for-web-only-requirement-create-an-endpoint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#for-web-only-requirement-create-an-endpoint"}},[t._v("#")]),t._v(" (for Web only) Requirement: Create an endpoint")]),t._v(" "),a("p",[t._v("WithingsFlutter uses "),a("code",[t._v("flutter_web_auth")]),t._v(" to let you authenticate to Withings. In order to let it work correcty, as indicated in "),a("a",{attrs:{href:"https://pub.dev/packages/flutter_web_auth",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://pub.dev/packages/flutter_web_auth"),a("OutboundLink")],1),t._v(", on the Web platform an endpoint needs to be created that captures the callback URL and sends it to the application using the JavaScript "),a("code",[t._v("postMessage()")]),t._v(" method. In the "),a("code",[t._v("./web")]),t._v(" folder of the project, create an HTML file with the name e.g. "),a("code",[t._v("auth.html")]),t._v(" with content:")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token doctype"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<!")]),a("span",{pre:!0,attrs:{class:"token doctype-tag"}},[t._v("DOCTYPE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token name"}},[t._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Authentication complete"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Authentication is complete. If this does not happen automatically, please\nclose the window.\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("opener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("postMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'flutter-web-auth'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("origin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("Redirection URL passed to the authentication service must be the same as the URL on which the application is running (schema, host, port if necessary) and the path must point to created HTML file, "),a("code",[t._v("/auth.html")]),t._v("in this case. The "),a("code",[t._v("callbackUrlScheme")]),t._v(" parameter of the "),a("code",[t._v("authenticate()")]),t._v(" method does not take into account, so it is possible to use a schema for native platforms in the code.")]),t._v(" "),a("p",[t._v("For the Sign in with Apple in web_message response mode, postMessage from "),a("a",{attrs:{href:"https://appleid.apple.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://appleid.apple.com"),a("OutboundLink")],1),t._v(" is also captured, and the authorization object is returned as a URL fragment encoded as a query string (for compatibility with other providers).")]),t._v(" "),a("h2",{attrs:{id:"step-2-test-withingsflutter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-2-test-withingsflutter"}},[t._v("#")]),t._v(" Step 2: Test WithingsFlutter")]),t._v(" "),a("p",[t._v("Once installed, it is time to test drive WithingsFlutter. In this example, we will use WithingsFlutter to authenticate our app into Withings APIs and simply fetch a list of ECG records and Afib classification for a given period of time.")]),t._v(" "),a("h3",{attrs:{id:"preliminary-requirement-register-your-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#preliminary-requirement-register-your-app"}},[t._v("#")]),t._v(" Preliminary requirement: Register your app")]),t._v(" "),a("p",[t._v('To be able to perform any operation with the Withings APIs, you must register first your application in the developer portal of Withings and obtain two IDs, namely the "'),a("strong",[t._v("Client ID")]),t._v('" and the "'),a("strong",[t._v("(Client) Secret")]),t._v('". To do so, you have to follow these steps.')]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Choose the environment on which your applications will be running at "),a("a",{attrs:{href:"https://developer.withings.com/dashboard/welcome",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://developer.withings.com/dashboard/welcome"),a("OutboundLink")],1),t._v(".\n"),a("img",{attrs:{src:"/WithingsFlutter/environment.png",alt:"Withings environment selection"}})])]),t._v(" "),a("li",[a("p",[t._v("Then proceed to create a Withings account, if you do not have one, or login.")])]),t._v(" "),a("li",[a("p",[t._v("Register a new app at "),a("a",{attrs:{href:"https://developer.withings.com/dashboard/create",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://developer.withings.com/dashboard/create"),a("OutboundLink")],1),t._v(', pressing on the button "'),a("strong",[t._v("+ Create an application")]),t._v('".')])])]),t._v(" "),a("p",[a("img",{attrs:{src:"/WithingsFlutter/create.png",alt:"Withings create an application"}})]),t._v(" "),a("ul",[a("li",[t._v("Select the plane of integration and then accept the terms and conditions.")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/WithingsFlutter/applicationcreation.png",alt:"Withings applicationcreation"}})]),t._v(" "),a("ul",[a("li",[t._v("Then the following form will appear")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/WithingsFlutter/information.png",alt:"Withings information"}})]),t._v(" "),a("ul",[a("li",[t._v("Set the "),a("strong",[t._v("Application name")])]),t._v(" "),a("li",[t._v("Set a brief "),a("strong",[t._v("Application Description")]),t._v(' (e.g., "Just a simple test of an awesome package.")')]),t._v(" "),a("li",[t._v("Set the "),a("strong",[t._v("Registered URLs")]),t._v(" to set the "),a("strong",[t._v("Callback URLs")]),t._v(' (e.g., "example://withings/auth").')]),t._v(" "),a("li",[t._v("Upload, if you want, your "),a("strong",[t._v("Project Logo")]),t._v(".")]),t._v(" "),a("li",[t._v("Press on "),a("strong",[t._v("Done")]),t._v(" button")]),t._v(" "),a("li",[t._v('In the following page, copy and save the values of the "'),a("strong",[t._v("Client ID")]),t._v('" and the "'),a("strong",[t._v("(Client) Secret")]),t._v('" provided by Withings for your app.')]),t._v(" "),a("li",[t._v("Press on the "),a("strong",[t._v("Confirm")]),t._v(" button and you will see a summary of the info related to your registered app, as:\n"),a("ul",[a("li",[a("strong",[t._v("ClientID")])]),t._v(" "),a("li",[a("strong",[t._v("(Client) Secret")])]),t._v(" "),a("li",[a("strong",[t._v("Callback URL")])]),t._v(" "),a("li",[a("strong",[t._v("API Endpoint")])])])])]),t._v(" "),a("h3",{attrs:{id:"app-authentication"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#app-authentication"}},[t._v("#")]),t._v(" App authentication")]),t._v(" "),a("p",[t._v("You are now ready to authorize your application.")]),t._v(" "),a("p",[t._v("To do that, simply call the asynchronous method "),a("code",[t._v("WithingsConnector.authorize()")]),t._v(", within your code, as:")]),t._v(" "),a("div",{staticClass:"language-dart extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dart"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WithingsCredentials")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" withingsCredentials "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WithingsConnector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("authorize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                clientID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Strings")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("withingsClientID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                clientSecret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Strings")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("withingsClientSecret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                scope"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-literal"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user.activity,user.metrics,user.sleepevents'")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                redirectUri"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Strings")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("withingsRedirectUri"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                callbackUrlScheme"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Strings")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("withingsCallbackScheme"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("and set in:")]),t._v(" "),a("ul",[a("li",[t._v("clientID: the clientID obtained before")]),t._v(" "),a("li",[t._v("clientSecret: the (Client) Secret obtained before")]),t._v(" "),a("li",[t._v("scopes: a comma-separated list (of "),a("code",[t._v("Strings")]),t._v(") of permission scopes you want to ask your user")]),t._v(" "),a("li",[t._v("redirectUri: the Callback URL obtained before, in our example "),a("code",[t._v("'example://withings/auth'")])]),t._v(" "),a("li",[t._v("callbackUrlScheme: the callbackUrlScheme, in our example "),a("code",[t._v("'example'")])])]),t._v(" "),a("p",[t._v("This will open a web view where user will be able to input his Withings credentials and login.\nAfter the login, the web view will close and the method will return a "),a("code",[t._v("WithingsCredentials?")]),t._v(" instance that contains the credentials to be used to make requests to the Withings Web API via "),a("code",[t._v("withings_flutter")]),t._v(". In particular, "),a("code",[t._v("withingsCredentials.userID")]),t._v(" contains the Withings user id of the user that just authorized "),a("code",[t._v("withings_flutter")]),t._v(", "),a("code",[t._v("withingsCredentials.withingsAccessToken")]),t._v(" contains the Withings access token, "),a("code",[t._v("withingsCredentials.withingsRefreshToken")]),t._v(" contains the Withings refresh token and "),a("code",[t._v("withingsCredentials.expires")]),t._v(" defines the access token expiry delay in seconds.")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("The credentials are not stored automatically somewhere in a persistent way. You must manage such crendentials according to your strategy.")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("You find more informations about the "),a("code",[t._v("scope")]),t._v(" field in "),a("a",{attrs:{href:"/WithingsFlutter/guide/authorization/authorization"}},[t._v("Authorization")])])]),t._v(" "),a("h3",{attrs:{id:"fetch-a-list-of-ecg-records-and-afib-classification-for-a-given-period-of-time"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fetch-a-list-of-ecg-records-and-afib-classification-for-a-given-period-of-time"}},[t._v("#")]),t._v(" Fetch a list of ECG records and Afib classification for a given period of time")]),t._v(" "),a("p",[t._v("With your app authorized, you are now ready to fetch data from Withings. In this example, we will "),a("a",{attrs:{href:"/WithingsFlutter/guide/heart/heartv2list"}},[t._v("fetch a list of ECG records and Afib classification for a given period of time")]),t._v(".")]),t._v(" "),a("p",[t._v("Using WithingsFlutter, this is very easy. First instanciate a "),a("code",[t._v("WithingsHeartListDataManager")]),t._v(" :")]),t._v(" "),a("div",{staticClass:"language-dart extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dart"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WithingsHeartListDataManager")]),t._v(" withingsHeartListDataManager "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WithingsHeartListDataManager")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Then fetch the desired data using the "),a("code",[t._v("fetch")]),t._v(" method of "),a("code",[t._v("WithingsHeartListDataManager")]),t._v(" with the proper "),a("code",[t._v("WithingsHeartAPIURL")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-dart extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dart"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WithingsHeartListData")]),t._v(" listheartdata "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" withingsHeartListDataManager\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WithingsHeartAPIURL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("list")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("accessToken"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" withingsCredentials"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("accessToken"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("That's it!")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("For more information on WithingsFlutter functionalities, check out the "),a("RouterLink",{attrs:{to:"/guide/"}},[t._v("Guide")])],1)])])}),[],!1,null,null,null);a.default=n.exports}}]);