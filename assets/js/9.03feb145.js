(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{282:function(t,s,e){"use strict";e.r(s);var a=e(14),n=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"authorization"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#authorization"}},[t._v("#")]),t._v(" Authorization")]),t._v(" "),s("h2",{attrs:{id:"authorize-your-application"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#authorize-your-application"}},[t._v("#")]),t._v(" Authorize your application")]),t._v(" "),s("p",[t._v("To do that, simply call the asynchronous method "),s("code",[t._v("WithingsConnector.authorize()")]),t._v(", within your code, as:")]),t._v(" "),s("div",{staticClass:"language-dart extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WithingsCredentials")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" withingsCredentials "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WithingsConnector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("authorize")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                clientID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Strings")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("withingsClientID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                clientSecret"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Strings")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("withingsClientSecret"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                scope"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-literal"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user.activity,user.metrics,user.sleepevents'")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                redirectUri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Strings")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("withingsRedirectUri"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                callbackUrlScheme"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Strings")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("withingsCallbackScheme"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("This will open a web view where user will be able to input his Withings credentials and login.\nAfter the login, the web view will close and the method will return a "),s("code",[t._v("WithingsCredentials?")]),t._v(" instance that contains the credentials to be used to make requests to the Withings Web API via "),s("code",[t._v("withings_flutter")]),t._v(". In particular, "),s("code",[t._v("withingsCredentials.userID")]),t._v(" contains the Withings user id of the user that just authorized "),s("code",[t._v("withings_flutter")]),t._v(", "),s("code",[t._v("withingsCredentials.withingsAccessToken")]),t._v(" contains the Withings access token, "),s("code",[t._v("withingsCredentials.withingsRefreshToken")]),t._v(" contains the Withings refresh token and "),s("code",[t._v("withingsCredentials.expires")]),t._v(" defines the access token expiry delay in seconds.")]),t._v(" "),s("p",[t._v("In the "),s("code",[t._v("scope")]),t._v(" field, you have to put a comma-separated list of permission scopes you want to ask your user for and check out this "),s("a",{attrs:{href:"https://developer.withings.com/developer-guide/v3/data-api/all-available-health-data/",target:"_blank",rel:"noopener noreferrer"}},[t._v("link"),s("OutboundLink")],1),t._v(" to know which scope/scopes you should use.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("In the example all possible scopes have been included. You can do the same to access all the data.")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("The credentials are not stored automatically somewhere in a persistent way. You must manage such crendentials according to your strategy.")])]),t._v(" "),s("h2",{attrs:{id:"refresh-credentials"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#refresh-credentials"}},[t._v("#")]),t._v(" Refresh credentials")]),t._v(" "),s("p",[t._v("To do that, simply call the asynchronous method "),s("code",[t._v("WithingsConnector.refreshToken()")]),t._v(", within your code, as:")]),t._v(" "),s("div",{staticClass:"language-dart extra-class"},[s("pre",{pre:!0,attrs:{class:"language-dart"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WithingsCredentials")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" newWithingsCredentials "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WithingsConnector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("refreshToken")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            clientID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Strings")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("withingsClientID"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            clientSecret"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Strings")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("withingsClientSecret"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            withingsRefreshToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" withingsCredentials"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("withingsRefreshToken"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("this will return a new instance of "),s("code",[t._v("WithingsCredentials")]),t._v(" containing the refreshed tokens, if not null.")])])}),[],!1,null,null,null);s.default=n.exports}}]);